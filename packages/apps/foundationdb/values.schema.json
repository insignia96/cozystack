{
  "title": "Chart Values",
  "type": "object",
  "properties": {
    "automaticReplacements": {
      "description": "Enable automatic pod replacements",
      "type": "boolean",
      "default": true
    },
    "backup": {
      "description": "Backup configuration",
      "type": "object",
      "default": {
        "enabled": false,
        "retentionPolicy": "7d",
        "s3": {
          "bucket": "",
          "credentials": {
            "accessKeyId": "",
            "secretAccessKey": ""
          },
          "endpoint": "",
          "region": "us-east-1"
        }
      },
      "required": [
        "enabled",
        "retentionPolicy",
        "s3"
      ],
      "properties": {
        "enabled": {
          "description": "Enable backups",
          "type": "boolean",
          "default": false
        },
        "retentionPolicy": {
          "description": "Retention policy for backups",
          "type": "string",
          "default": "7d"
        },
        "s3": {
          "description": "S3 configuration for backups",
          "type": "object",
          "default": {
            "bucket": "",
            "credentials": {
              "accessKeyId": "",
              "secretAccessKey": ""
            },
            "endpoint": "",
            "region": "us-east-1"
          },
          "required": [
            "bucket",
            "credentials",
            "endpoint",
            "region"
          ],
          "properties": {
            "bucket": {
              "description": "S3 bucket name",
              "type": "string"
            },
            "credentials": {
              "description": "S3 credentials",
              "type": "object",
              "default": {
                "accessKeyId": "",
                "secretAccessKey": ""
              },
              "required": [
                "accessKeyId",
                "secretAccessKey"
              ],
              "properties": {
                "accessKeyId": {
                  "description": "S3 access key ID",
                  "type": "string"
                },
                "secretAccessKey": {
                  "description": "S3 secret access key",
                  "type": "string"
                }
              }
            },
            "endpoint": {
              "description": "S3 endpoint URL",
              "type": "string"
            },
            "region": {
              "description": "S3 region",
              "type": "string",
              "default": "us-east-1"
            }
          }
        }
      }
    },
    "cluster": {
      "description": "Cluster configuration",
      "type": "object",
      "default": {
        "faultDomain": {
          "key": "kubernetes.io/hostname",
          "valueFrom": "spec.nodeName"
        },
        "processCounts": {
          "cluster_controller": 1,
          "stateless": -1
        },
        "version": "7.3.63"
      },
      "required": [
        "faultDomain",
        "processCounts",
        "version"
      ],
      "properties": {
        "faultDomain": {
          "description": "Fault domain configuration",
          "type": "object",
          "default": {
            "key": "kubernetes.io/hostname",
            "valueFrom": "spec.nodeName"
          },
          "required": [
            "key",
            "valueFrom"
          ],
          "properties": {
            "key": {
              "description": "Fault domain key",
              "type": "string",
              "default": "kubernetes.io/hostname"
            },
            "valueFrom": {
              "description": "Fault domain value source",
              "type": "string",
              "default": "spec.nodeName"
            }
          }
        },
        "processCounts": {
          "description": "Process counts for different roles",
          "type": "object",
          "default": {
            "cluster_controller": 1,
            "stateless": -1
          },
          "required": [
            "cluster_controller",
            "stateless",
            "storage"
          ],
          "properties": {
            "cluster_controller": {
              "description": "Number of cluster controller processes",
              "type": "integer",
              "default": 1
            },
            "stateless": {
              "description": "Number of stateless processes (-1 for automatic)",
              "type": "integer",
              "default": -1
            },
            "storage": {
              "description": "Number of storage processes",
              "type": "integer"
            }
          }
        },
        "version": {
          "description": "Version of FoundationDB to use",
          "type": "string",
          "default": "7.3.63"
        }
      }
    },
    "customParameters": {
      "description": "Custom parameters to pass to FoundationDB",
      "type": "array",
      "default": [],
      "items": {
        "type": "string"
      }
    },
    "imageType": {
      "description": "Container image deployment type",
      "type": "string",
      "default": "unified",
      "enum": [
        "unified",
        "split"
      ]
    },
    "monitoring": {
      "description": "Monitoring configuration",
      "type": "object",
      "default": {
        "enabled": true
      },
      "required": [
        "enabled"
      ],
      "properties": {
        "enabled": {
          "description": "Enable WorkloadMonitor integration",
          "type": "boolean",
          "default": true
        }
      }
    },
    "replicas": {
      "description": "Number of FoundationDB replicas (total instances)",
      "type": "integer",
      "default": 3
    },
    "resources": {
      "description": "Explicit CPU and memory configuration for each FoundationDB instance. When left empty, the preset defined in `resourcesPreset` is applied.",
      "type": "object",
      "default": {},
      "properties": {
        "cpu": {
          "description": "CPU available to each instance",
          "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ],
          "x-kubernetes-int-or-string": true
        },
        "memory": {
          "description": "Memory (RAM) available to each instance",
          "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ],
          "x-kubernetes-int-or-string": true
        }
      }
    },
    "resourcesPreset": {
      "description": "Default sizing preset used when `resources` is omitted. Allowed values: `small`, `medium`, `large`, `xlarge`, `2xlarge`.",
      "type": "string",
      "default": "medium",
      "enum": [
        "small",
        "medium",
        "large",
        "xlarge",
        "2xlarge"
      ]
    },
    "securityContext": {
      "description": "Security context for containers",
      "type": "object",
      "default": {
        "runAsGroup": 4059,
        "runAsUser": 4059
      },
      "required": [
        "runAsGroup",
        "runAsUser"
      ],
      "properties": {
        "runAsGroup": {
          "description": "Group ID to run the container",
          "type": "integer",
          "default": 4059
        },
        "runAsUser": {
          "description": "User ID to run the container",
          "type": "integer",
          "default": 4059
        }
      }
    },
    "storage": {
      "description": "Storage configuration",
      "type": "object",
      "default": {
        "size": "16Gi",
        "storageClass": ""
      },
      "required": [
        "size",
        "storageClass"
      ],
      "properties": {
        "size": {
          "description": "Size of persistent volumes for each instance",
          "default": "16Gi",
          "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ],
          "x-kubernetes-int-or-string": true
        },
        "storageClass": {
          "description": "Storage class (if not set, uses cluster default)",
          "type": "string"
        }
      }
    }
  }
}